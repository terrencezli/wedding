<html>
<head>
	<!-- Favicon -->
	<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
	<link rel="manifest" href="/favicon/site.webmanifest">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">

	<!--<script src="../js/jquery-1.11.1.min.js"></script>-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<title>RSVP</title>
	<style type="text/css"> html{ margin: 0; height: 100%; overflow: hidden; } iframe{ position: absolute; left:0; right:0; bottom:0; top:57px; border:0; }
	</style>
</head>
<body>
<div id="includedNavbar"></div>
<div class="rsvp-form-start" id="rsvp-form-start" style="padding-top: 5%">
	<!-- Unsplashed background photo -->
	<div class="rsvp-background">
		<h2>RSVP</h2>
		<img src="images/rsvp-background.jpg"  style="display: block; margin: 0 auto; max-height: 100vh; max-width: 100vh;">
	</div>
	<!-- Modal -->
	<div class="modal fade" id="myModal" role="dialog" style="padding-top: 10%;">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Please enter the name on the invitation:</h4>
				</div>
				<div class="modal-body">
					<div id="error-message" style="display: none; color: red;">
						<p>Please enter a valid name.</p>
					</div>
					<input type="text" id="nameText">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-default" onclick="findForm()">Submit</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="rsvp-form" id="rsvp-form"></div>


<script type="text/javascript">
    $(document).ready(function() {
        $("#includedNavbar").load("navbar.html");

        $('#myModal').modal('show');
    });

    document.querySelector('#nameText').addEventListener('keypress', function (e) {
        var key = e.which || e.keyCode;
        if (key === 13) { // 13 is enter
            findForm()
        }
    });

	function getFormWithName(name) {
		var nameFormMap = {
		    'Grandma': "https://docs.google.com/forms/d/e/1FAIpQLSdyCHNxyNOvLPiw1spk09l4VmZyJstDkEmSSXppCgYd3i1uBQ/viewform?embedded=true",
		};

		if (!nameFormMap[name]) {
		    return ""
		}

		return nameFormMap[name];
    }

    function findForm() {
        var name = document.getElementById("nameText").value;
        var link = getFormWithName(name);

        if (!link) {
            document.getElementById("error-message").style.display = 'block';
		} else {
            var iframe = document.createElement('iframe');
            iframe.frameBorder = 0;
            iframe.marginHeight = 0;
            iframe.marginWidth = 0;
            iframe.width = "100%";
            iframe.height = "100%";
            iframe.id = "google-form";
            iframe.setAttribute("src", link);
            document.getElementById("rsvp-form-start").style.display = 'none';
            $('#myModal').modal('hide');
            document.getElementById("rsvp-form").appendChild(iframe);
		}
    }
</script>
</body>